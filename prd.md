# 产品需求文档 (PRD)：周末放映室海报智能生成器

## 1. 项目概述 (Project Overview)
* **项目名称**：周末放映室海报生成器 (Weekend Screening Room Poster Generator)
* **用户背景**：儿童阅读推广机构负责人，需要定期制作高质量的短片推荐海报。
* **核心痛点**：手动排版耗时，文案撰写需要灵感，图片素材处理繁琐。
* **产品目标**：开发一款 Web 端工具，通过“输入链接 -> AI 辅助生成 -> 人工微调”的流程，快速生成符合特定品牌视觉规范的宣传海报。

## 2. 用户流程 (User Flow)
1.  **输入链接**：用户输入视频地址（B站/公众号等），点击“智能分析”。
2.  **AI 处理**：系统抓取网页信息，调用 Google Gemini 模型自动生成剧情简介、推荐语和标签。
3.  **人工决策与编辑**：
    * **文案确认**：用户微调 AI 生成的文字。
    * **图片决策**：系统提供抓取的缩略图作为占位，**用户必须能够上传本地高清大图**以保证海报质量。
    * **标签管理**：增删改视频标签。
4.  **实时预览**：右侧画布实时渲染最终海报效果（所见即所得）。
5.  **导出**：点击下载，生成高分辨率 PNG 图片。

## 3. 功能详细需求 (Functional Requirements)

### 3.1 核心输入与 AI 分析
* **输入框**：支持视频 URL 输入。
* **后端逻辑**：
    * **抓取**：提取目标网页的 Title, Meta Description, OG Image。
    * **AI 生成 (Gemini)**：基于抓取内容，生成以下 JSON 数据：
        * `summary`: 约 60 字的剧情简介（客观）。
        * `recommendation`: 约 50 字的推荐理由（感性，适合引用）。
        * `tags`: 2-3 个内容标签（如“奥斯卡”、“温情”）。

### 3.2 编辑器区域 (左侧面板)
* **封面图管理**：
    * 默认展示抓取的 OG Image。
    * **核心功能**：提供醒目的“上传高清封面”按钮（支持 Drag & Drop 或点击上传），预览图需保持比例。
* **表单字段**：
    * 标题 (Input)：默认填入抓取标题，可修改。
    * 标签 (Tag Input)：支持回车添加，点击删除。
    * 剧情简介 (Textarea)：支持多行编辑。
    * 推荐理由 (Textarea)：支持多行编辑。
* **二维码设置**：
    * 默认值：用户输入的视频 URL。
    * 可修改：允许用户替换为其他链接（如公众号文章链接）。

### 3.3 海报预览区域 (右侧面板)
* **布局规范**：严格复刻《鹬 (Piper)》海报模板。
    * **Header**：全宽高清大图 (Aspect Ratio 约为 16:9 或 3:2)。
    * **Tags**：悬浮于图片左下角，半透明黑底白字胶囊样式。
    * **Title**：黑底白字，大号字体，位于图片正下方。
    * **Body**：浅灰背景 (#F5F5F5)。
    * **Quote**：推荐语需有左侧竖线装饰，斜体或衬线体，突出“金句”感。
    * **Footer**：
        * 左侧：品牌 Logo + “周末放映室” + Slogan “精选优质儿童动画短片”。
        * 右侧：自动生成的二维码。

### 3.4 导出功能
* **格式**：PNG 格式。
* **质量**：使用 `html2canvas`，Scale 设置为 2 或 3，确保视网膜屏幕与手机查看清晰无锯齿。

## 4. 技术栈规范 (Technical Stack)
* **Framework**: Next.js 14+ (App Router)
* **Styling**: Tailwind CSS (关键：用于实现像素级布局还原)
* **AI Model**: Google Gemini API (`@google/generative-ai`)
* **Image Generation**: `html2canvas`
* **Icons**: `lucide-react`
* **Components**: `shadcn/ui` (可选，用于快速搭建 Input/Button)

## 5. 开发注意事项
* **图片清晰度优先**：代码中需预留处理图片 Object-fit 的逻辑，避免封面图拉伸变形。
* **Gemini Prompt 优化**：Prompt 需明确要求中文输出，并严格限制字数，防止爆框。
* **错误处理**：若抓取失败或 AI 超时，需允许用户全手动输入，不阻断流程。